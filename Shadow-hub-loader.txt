local LoaderConfig = {
    Enabled = true,
    SupportedGames = {
        [116756675465096] = "https://vss.pandadevelopment.net/virtual/file/ea30575d70fd49dd", 
     },
    NotificationSettings = {
        Title = "Game Loader",
        Duration = 5
    }
}

if not LoaderConfig.Enabled then
    return 
end

local currentPlaceId = game.PlaceId

if LoaderConfig.SupportedGames[currentPlaceId] then
    local success, err = pcall(function()
        local url = LoaderConfig.SupportedGames[currentPlaceId]
        
        -- Step 1: Get the raw text
        local scriptContent = game:HttpGet(url)
        
        if not scriptContent or scriptContent == "" then
            error("The URL returned empty content.")
        end

        -- Step 2: Try to turn text into a function (without running it yet)
        local executable, loadErr = loadstring(scriptContent)

        -- Step 3: Check if it compiled correctly
        if not executable then
            error("Syntax error in downloaded script: " .. tostring(loadErr))
        end

        -- Step 4: Run it
        executable()
    end)
    
    if not success then
        warn("Loader Error: " .. err)
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = LoaderConfig.NotificationSettings.Title,
            Text = "Error loading script. Check console (F9).",
            Duration = LoaderConfig.NotificationSettings.Duration
        })
    end
else
    game:GetService("StarterGui"):SetCore("SendNotification", {
        Title = LoaderConfig.NotificationSettings.Title,
        Text = "Game not supported",
        Duration = LoaderConfig.NotificationSettings.Duration
    })
end
